<!-- caminho: experiencein/perfis/templates/index.html -->
{% extends "base.html" %}
{% load static %}
<!--  'load staticfiles' and 'load admin_static' were deprecated in Django 2.2, and removed in Django 3.0. -->
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>ExperienceIn</title>
    <link href="{% static 'styles/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'styles/main.css' %}" rel="stylesheet">
</head>

<body> 
    {% block body %}
    <div class="col-lg-12">

        <div class="panel panel-default">
            <div class="panel-heading">
                <strong>Todos os Perfis</strong>
            </div>

            {% if perfis %}
            <ul>
                {% for perfil in perfis %}
                <li>
                    <a href="{% url 'exibir' perfil.id %}">{{perfil.nome }}</a>/ {{ perfil.email }}
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>Nenhum Perfil encontrado</p>
            {% endif %}
        </div>

        <!-- Exibir convite --->

        <div class="panel panel-default">
            {% with total_de_convites=perfil_logado.convites_recebidos.count %}
            {% if total_de_convites %}
            <div class="panel-heading">
                <strong>Você tem {{ total_de_convites }} convite{{ perfil_logado.convites_recebidos.count|pluralize }} aguardando aprovação</strong>
            </div>
            <ul class="list-group">
                {% for convite in perfil_logado.convites_recebidos.all %}
                <li class="list-group-item"> {{ convite.solicitante.nome }}
                    <a href="#" class="pull-right">aceitar</a>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <div class="panel-body">
                <p>Nenhum convite recebido :(</p>
            </div>
            {% endif %}
            {% endwith %}
        </div>
    </div>
    {% endblock %}
</body>

</html>